page_assembler
:  a micro service that accepts a URL, parses its path and queries PostgREST for object(s) and template, sends both to pandoc server returning result to requestor. Route handler is defined in Postgres via a function. Function can apply permissions if nessary.  The function accepts a path and returns markup, content-type, suggested http status code/message. page_assembler passes that back to reqestor.


Logic in page assembler is minimal, Just url parse for a path to query PostgREST to get be results of route handler PL function in PostgreSQL. Objects can then be retrieved and routed along with the template to Pandoc server for final page content or if error return a http status code and error message.

PL function must accept a path and return the data object, template name, content type, suggested http status code and error msg if error. PL function is responsible for applying permissions.
.