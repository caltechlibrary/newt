<!DOCTYPE html>
<html>
<head>
    <title>Newt -- a new take on the webstack</title>
    <link rel="stylesheet" href="https://caltechlibrary.github.io/css/site.css">
</head>
<body>
<header>
<a href="https://library.caltech.edu"><img src="https://caltechlibrary.github.io/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
	<li><a href="/">Home</a></li>
	<li><a href="./">README</a></li>
	<li><a href="user-manual.html">User Manual</a></li>
	<li><a href="LICENSE">LICENSE</a></li>
	<li><a href="INSTALL.html">INSTALL</a></li>
	<li><a href="about.html">About</a></li>
	<li><a href="https://github.com/caltechlibrary/newt">GitHub</a></li>
</ul>
</nav>

<section>
<h1 id="name">NAME</h1>
<p>newtmustache</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p>newtmustache</p>
<h1 id="description">DESCRIPTION</h1>
<p><strong>newtmustache</strong> is a microservice that provides a
Mustache template rendering inspired by Pandoc server.</p>
<p>There is no configuration file. There are command line options to
specify port and timeout.</p>
<h1 id="api">API</h1>
<h2 id="root-endpoint">Root endpoint</h2>
<p>The root (/) endpoint accepts only POST method requests. Other
methods will yield a appropriate http status code.</p>
<h2 id="request">Request</h2>
<p>The body of the POST request should be a JSON object, with the
following fields. Template is always required. It must also include at
least one of either metadata or variables. If both are set then the maps
are merged before processing with the template.</p>
<dl>
<dt>template (string)</dt>
<dd>
String contents of a document template, see Mustache <a
href="https://mustache.github.io/mustache.5.html"
class="uri">https://mustache.github.io/mustache.5.html</a>.
</dd>
<dt>data (JSON map)</dt>
<dd>
String-valued metadata.
</dd>
<dt>content_type (optional, default is text/plain)</dt>
<dd>
Set the rendered content type, default is text/plain. You probably want
text/html for web pages.
</dd>
</dl>
<h2 id="response">Response</h2>
<p>It returns a response body and headers set by the default http writer
provided in the http go package. If there request can’t be fullfilled
then an http status code and text will be returned.</p>
<h1 id="options">OPTIONS</h1>
<dl>
<dt>-help</dt>
<dd>
display help
</dd>
<dt>-license</dt>
<dd>
display license
</dd>
<dt>-version</dt>
<dd>
display version
</dd>
<dt>–port NUM</dt>
<dd>
HTTP port on which to run the server. Default: 3030.
</dd>
<dt>–timeout SECONDS</dt>
<dd>
Timeout in seconds, after which a conversion is killed. Default: 2.
</dd>
</dl>
<h1 id="the-templates">The templates</h1>
<p>Mustache templates are documented at <a
href="https://mustache.github.io"
class="uri">https://mustache.github.io</a>. The template engined used is
based on Go package <a href="https://github.com/cbroglie/mustache"
class="uri">https://github.com/cbroglie/mustache</a>.</p>
</section>

<footer>
<span><h1><A href="http://caltech.edu">Caltech</a></h1></span>
<span>&copy; 2023 <a href="https://www.library.caltech.edu/copyright">Caltech library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<a class="cl-hide" href="sitemap.xml">Site Map</a>
</footer>
</body>
</html>
