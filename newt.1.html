<!DOCTYPE html>
<html>
<head>
    <title>Newt -- a new take on the webstack</title>
    <link rel="stylesheet" href="https://caltechlibrary.github.io/css/site.css">
</head>
<body>
<header>
<a href="https://library.caltech.edu"><img src="https://caltechlibrary.github.io/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
	<li><a href="/">Home</a></li>
	<li><a href="./">README</a></li>
	<li><a href="user-manual.html">User Manual</a></li>
	<li><a href="LICENSE">LICENSE</a></li>
	<li><a href="INSTALL.html">INSTALL</a></li>
	<li><a href="about.html">About</a></li>
	<li><a href="https://github.com/rsdoiel/newt">GitHub</a></li>
</ul>
</nav>

<section>
<h1 id="name">NAME</h1>
<p>newt</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p>newt [CONFIG_FILE]</p>
<h1 id="description">DESCRIPTION</h1>
<p><em>newt</em> is a microservice designed to work along side Postgres,
PostgREST, and Pandoc server. It provides URL routing and data flow
between the microservices based on a list of “routes” described in a CSV
file. newt is part of the Newt Project which is exploring building web
services, applications and sites using SQL for data modeling and define
back-end service behaviors along with Pandoc templates used to generate
HTML consumed by the web browser. newt supports data hosted in Postgres
databases via PostgREST JSON API as well as static files contained in an
“htdocs” directory (e.g. HTML, CSS, JavaScript, and image assets).</p>
<p>This goal of Newt Project is to be able to assemble an entire backend
from off the self services only requiring data modeling and end point
definitions using SQL and a Postgres database. Reducing the back-end to
SQL may simplify application management (it reduces it to a database
administrator activity) and free up developer time to focus more on
front end development and human interaction. It is also hoped that
focusing the back-end on a declaritive model will allow for a more
consistent and reliable back-end.</p>
<h1 id="options">OPTIONS</h1>
<dl>
<dt>-help</dt>
<dd>
display help
</dd>
<dt>-license</dt>
<dd>
display license
</dd>
<dt>-version</dt>
<dd>
display version
</dd>
<dt>-dry-run</dt>
<dd>
Load configuration and routes CSV but don’t start web service
</dd>
</dl>
<h1 id="configuration">CONFIGURATION</h1>
<p>The three things newt needs to know to run are port number, where to
find the “routes” CSV file and a list of any POSIX environment variables
to import and make available inside the router.</p>
<p>{app_mame} can be configured via a POSIX environment.</p>
<pre><code>NEWT_PORT=&quot;3030&quot;
NEWT_ROUTES=&quot;routes.csv&quot;
NEWT_ENV=&quot;DB_NAME;DB_USER;DB_PASSWORD&quot;
export NEWT_PORT
export NEWT_ROUTES
export NEWT_ENV</code></pre>
<p>It can also be configured using a configuration file.</p>
<pre><code>newt_port = &quot;3030&quot;
newt_routes = &quot;routes.csv&quot;
newt_env = [ &quot;DB_NAME&quot;, &quot;DB_USER&quot;, &quot;DB_PASSWORD&quot; ]</code></pre>
<p>The environment will load first then the configuration file if
provided. The configuration file takes presidence to the
environment.</p>
<p>newt does not have secrets but could use secrets passed in via the
environment. This allows your routes CSV file to be safely saved along
side your SQL source code for your Newt Project.</p>
<h1 id="examples">EXAMPLES</h1>
<p>Configuration from the environment</p>
<pre><code>    export NEWT_PORT=&quot;3030&quot;
    export NEWT_ROUTES=&quot;routes.csv&quot;
    export NEWT_ENV=&quot;DB_USER;DB_PASSWORD&quot;
    newt</code></pre>
<p>Configuration from a YAML file called “newt.yaml”</p>
<pre><code>newt newt.yaml</code></pre>
</section>

<footer>
<span><h1><A href="http://caltech.edu">Caltech</a></h1></span>
<span>&copy; 2023 <a href="https://www.library.caltech.edu/copyright">Caltech library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<a class="cl-hide" href="sitemap.xml">Site Map</a>
</footer>
</body>
</html>
