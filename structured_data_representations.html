<!DOCTYPE html>
<html lang="en">
<head>
    <title>Newt -- structured_data_representations</title>
    <link rel="stylesheet" href="https://caltechlibrary.github.io/css/site.css">
    <base href="./">
</head>
<body>
<header>
<a href="https://library.caltech.edu"><img src="https://caltechlibrary.github.io/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
	<li><a href="/">Home</a></li>
	<li><a href="./">README</a></li>
	<li><a href="user_manual.html">User Manual</a></li>
	<li><a href="LICENSE">LICENSE</a></li>
	<li><a href="INSTALL.html">INSTALL</a></li>
	<li><a href="about.html">About</a></li>
	<li><a href="search.html">Search</a></li>
	<li><a href="https://github.com/caltechlibrary/newt">GitHub</a></li>
</ul>
</nav>

<section>
<h1
id="supporting-complex-form-elements-history-and-brain-storm">Supporting
complex form elements, history and brain storm</h1>
<p>Galleries, libraries, archives and museums have many use cases for
individual metadata records containing a lists of items. Example a
citation may contain a list of authors or collaborators.</p>
<p>HTML 5 provides a rich set of input types<a href="#fn1"
class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> but
does not include list element type<a href="#fn2" class="footnote-ref"
id="fnref2" role="doc-noteref"><sup>2</sup></a>. The data model of a web
form without enhancement is flat. It is a series of key/value pairs
where the data when transmitted is urlencoded and sent as text to the
receiving web service. Let’s put a pin in that for later.</p>
<h2 id="simplification-and-trade-offs">Simplification and trade
offs</h2>
<p>Repository and catalog systems current (2024) rely on heavy weight
frameworks to provide a decent data entry experience<a href="#fn3"
class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.
This approach that dates back to the early 21st century is not required.
CSS improvements like variables and better units, JavaScript
improvements including web workers and promise or DOM improvements like
support for web components was delivered long ago. I can’t remember the
last time I felt it necessary to include <a
href="https://modernizr.com/">modernizer</a> or a shim library in a web
page. Yet large web systems still build web pages like it 2010.</p>
<p>I think with a couple of heuristics can can skip the CSS and
JavaScript frameworks, write less code and still provide a good user
experience.</p>
<ol type="1">
<li>Design for the smallest screen used to access your web site or
application (often that is a phone today)</li>
<li>Use CSS to rearrange elements on the screen as the screen size
expands (e.g. your screen might become a wall sized television in a
meeting)</li>
<li>Limit JavaScript to orchestrating behavior (e.g. defining web
components) or access interacting with data services</li>
<li>Only write the minimum of CSS to create a readable page</li>
</ol>
<p>Using these four heuristics along with vanilla JavaScript and CSS we
can avoid whole tool chains of complexity. These are heuristics not
rules. As designers and developers we need to make choices. Hopefully we
make informed choices.</p>
<h2 id="the-trouble-with-web-components-a-fallback-problem">The trouble
with web components, a fallback problem</h2>
<p>In 2010 the trouble with web components was browser support. That
isn’t the problem in 2024. The big trouble with web components is
JavaScript. JavaScript is used to define them and to run them<a
href="#fn4" class="footnote-ref" id="fnref4"
role="doc-noteref"><sup>4</sup></a>. If the browser has JavaScript
disabled, it is unavailable or it is not supported by the web browser
then you’re stuck<a href="#fn5" class="footnote-ref" id="fnref5"
role="doc-noteref"><sup>5</sup></a> with an usable component.</p>
<p>So what to do about lack of list elements if web components can’t
relied upon to solve the problem? Approach the problem using the ideas
from progressive enhancement. First decide how you would edit our lists
if web components and JavaScript had never made it into the web? An old
school trick for column oriented data where you didn’t want the overhead
of a table element full of editable cells was to rendering the table as
comma delimited output editable with a textarea element. This was find
for small table editing, each line was a row and commas as easy
punctuation to explain and worst case the human could quote the cell
that needed to continue an embedded comma. Not ideal but doable. Our
list of authors could be edited in this way right up until we have many
columns or columns that hold multi dimensional data (e.g. list of
attributes and values).</p>
<p>When implementing UI elements in the past I’ve used JSON to pass data
to and from the browser, can we use pretty printed JSON in a textarea as
a fallback?</p>
<p>Here’s an example of an person object in JSON.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;family_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Doiel&quot;</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;lived_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Robert&quot;</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;identifers&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;orcid&quot;</span><span class="fu">:</span> <span class="st">&quot;0000-0003-0900-6903&quot;</span><span class="fu">,</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;clpid&quot;</span><span class="fu">:</span> <span class="st">&quot;Doiel-R-S&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>This doesn’t worked as a simple comma delimited text editable in an
textarea element because of the “identifiers” field/column. If JSON is
pretty printed and not too complex it can be easy enough to read. It is
easy to pick out my name and edit it. There’s a catch when it comes to
editing JSON. It’s trivially easy to accidentally mismatch a double
quote, square bracket or curly brace. Similarly adding or removing a
colon or comma can create a problem too. Is there a better way to
express this data structure?</p>
<p>YAML is a notation for expressing structured data. Here’s my person
object as expressed using YAML.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmaily_name</span><span class="kw">:</span><span class="at"> Doiel</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lived_name</span><span class="kw">:</span><span class="at"> Robert</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">idntifiers</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">orcid</span><span class="kw">:</span><span class="at"> 0000-0003-0900-6903</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">clpid</span><span class="kw">:</span><span class="at"> Doiel-R-S</span></span></code></pre></div>
<p>YAML tends to look like a list. Punctuation still counts as it does
in JSON, e.g. colon and dash mean specific things in YAML. Yet if you
need to correct the spelling of my name or ORCID you can do so with less
worry because we don’t need to worry about quoting or about matching
braces. I remains easy to read. It resembles a list in Markdown.</p>
<p>Let’s look at a list of authors in JSON<a href="#fn6"
class="footnote-ref" id="fnref6"
role="doc-noteref"><sup>6</sup></a>.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">{</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;family_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Doiel&quot;</span><span class="fu">,</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lived_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Robert&quot;</span><span class="fu">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;identifers&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span> <span class="dt">&quot;orcid&quot;</span><span class="fu">:</span> <span class="st">&quot;0000-0003-0900-6903&quot;</span><span class="fu">,</span> <span class="dt">&quot;clpid&quot;</span><span class="fu">:</span> <span class="st">&quot;Doiel-R-S&quot;</span> <span class="fu">}</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">{</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;family_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Morrell&quot;</span><span class="fu">,</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;lived_name&quot;</span><span class="fu">:</span> <span class="st">&quot;Thomas&quot;</span><span class="fu">,</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;identifiers&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>       <span class="fu">{</span> <span class="dt">&quot;orcid&quot;</span><span class="fu">:</span> <span class="st">&quot;0000-0001-9266-5146&quot;</span><span class="fu">,</span> <span class="dt">&quot;clpid&quot;</span><span class="fu">:</span> <span class="st">&quot;Morrell-T-E&quot;</span> <span class="fu">}</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span></span></code></pre></div>
<p>Now look at the same list expressed in YAML.</p>
<p>~<del>yaml - family_name: Doiel lived_name: Robert identifers: -
clpid: Doiel-R-S orcid: 0000-0003-0900-6903 - family_name: Morrell
lived_name: Thomas identifiers: - clpid: Morrell-T-E orcid:
0000-0001-9266-5146</del></p>
<p>There is a learning curve to YAML. It’s more complex than separating
field values with a comma. I need to know the rules about indentation,
dashes and colons. If I am including large text blocks I need to know
about the pipe character and indentation nuances. I think YAML provides
an easy of reading over pretty printed JSON, it provides easier editing
than JSON too if you are trying to fix a value in previously created
YAML. YAML like JSON is available in port programming languages. YAML
can easily be integrated server side (e.g. transforming a SQL query
result into YAML is trivial), and browser side too<a href="#fn7"
class="footnote-ref" id="fnref7"
role="doc-noteref"><sup>7</sup></a>.</p>
<p>What we want our web component to do then is sit on top of our plain
old textarea holding YAML and present an easy to edit interface on top.
That way if JavaScript is available we have a nice user experience. If
not we can still edit the structure carefully via a standard textarea
element. With this approach we can support restricted browsers like
Lynx, Dillo and NetSurf while also providing a good experience for those
you are using Firefox, Chrome, Edge or Safari.</p>
<p>There are additional benefits for using the textarea apprach to
holding a YAML expression of a complex data structure. I can test
servers web form processing using curl or other simple HTTP client
library of tool. I don’t need to learn a framework or figure out how
that impacts the data I send back to the server. I only need to learn
how to implemenet web components. If I am clever I will use those
components in multiple projects.</p>
<p>On the database side I take my YAML, flip it to JSON and store the
contents in a JSON column. Similarly I can easily take a JSON column and
turn that into YAML.</p>
<p>I think this approach leverages the grain of the web while still
offering the potential of a good user experience for managing
metadata.</p>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>See MDN site for details, <a
href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input#input_types"
class="uri">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input#input_types</a><a
href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>For the this exploration I’m going to table discussing
file and select element types.<a href="#fnref2" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>See <a
href="https://archivesspace.org">ArchivesSpace</a> and <a
href="https://inveniosoftware.org/products/rdm/">Invenio RDM</a><a
href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>WASM loaded via JavaScript can also be used to create UI
elements this is exotic in 2024<a href="#fnref4" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Lynx, Dillo and NetSurf are browsers that don’t support
JavaScript or WASM (Web Assembly). A network disruptions can also
prevent JavaScript from reaching your favorite web browser. Filling out
a web form in a subway can be a nice place to experience this
phenomena.<a href="#fnref5" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>I think lists of JSON objects definitely too much to
typing even if you are a programmer used to working with JSON.<a
href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>See <a href="https://yaml.org/"
class="uri">https://yaml.org/</a> which lists two stable JavaScript
libraries<a href="#fnref7" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</section>

<footer>
<span><h1><A href="http://caltech.edu">Caltech</a></h1></span>
<span>&copy; 2023-2024 <a href="https://www.library.caltech.edu/copyright">Caltech library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<a class="cl-hide" href="sitemap.xml">Site Map</a>
</footer>
</body>
</html>
