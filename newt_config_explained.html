<!DOCTYPE html>
<html lang="en">
<head>
    <title>Newt -- newt_config_explained</title>
    <link rel="stylesheet" href="https://caltechlibrary.github.io/css/site.css">
    <base href="./">
</head>
<body>
<header>
<a href="https://library.caltech.edu"><img src="https://caltechlibrary.github.io/assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
	<li><a href="/">Home</a></li>
	<li><a href="./">README</a></li>
	<li><a href="user_manual.html">User Manual</a></li>
	<li><a href="LICENSE">LICENSE</a></li>
	<li><a href="INSTALL.html">INSTALL</a></li>
	<li><a href="about.html">About</a></li>
	<li><a href="search.html">Search</a></li>
	<li><a href="https://github.com/caltechlibrary/newt">GitHub</a></li>
</ul>
</nav>

<section>
<h1 id="newts-newt-config">Newt’s <code>newt config</code></h1>
<p>The Newt config action can create a new skeleton YAML file or update
the application’s property of a Newt YAML. It allows you to select which
application is run by <code>newt run</code> as well as configure those
applications. In addition you can use Newt Config to update the
configurations in the applications’ property. You might need to do this
if the standard ports for the network services need to be changed.</p>
<h2 id="create-your-first-newt-yaml-file">Create your first Newt YAML
file</h2>
<p>By default if you do not provide a YAML filename the
<code>newt config</code> command will use the filename of “app.yaml”.
Let’s try creating a “app.yaml” by running the config action.</p>
<pre class="shell"><code>newt config</code></pre>
<p>You will now get prompted by a series of questions that will
configure what is listed inside the applications’ property.</p>
<p>This is a transcript of running <code>newt config</code> to generated
“app.yaml”.</p>
<pre class="shel"><code>newt config
Creating &quot;app.yaml&quot;
Will app.yaml use Newt Router (Y/n)? Y
Will app.yaml use Newt Router (Y/n)? Y
Will app.yaml use Postgres (Y/n)? Y
Will app.yaml use PostgREST (Y/n)? Y
Will app.yaml use Newt Mustache (Y/n)? Y
Will app.yaml use Newt Generator (Y/n)? Y
Will app.yaml need to import environment variables (y/N)? N
Will app.yaml provide options to the services (y/N)? N
Save and exit (Y/n)? Y</code></pre>
<p>The single letter, “Y” or “N”, at the end of each question is the
answer I provided when generating the following “app.yaml”. If you just
press enter rather then specifically answer “Y” or “N” then you are
accepting the defaults of generating the application configuration. This
is fine in most cases.</p>
<p>Here’s the generated “app.yaml”.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#/usr/bin/env newt check</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This was generated by rsdoiel on 2024-05-09 with newt version 0.0.8 bc0d5e8.</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">applications</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">newtrouter</span><span class="kw">:</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">8010</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">newtmustache</span><span class="kw">:</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">8011</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">newtgenerator</span><span class="kw">:</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">namespace</span><span class="kw">:</span><span class="at"> app.yaml</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">postgres</span><span class="kw">:</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">5432</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">dsn</span><span class="kw">:</span><span class="at"> postgres://{PGUSER}:{PGPASSWORD}@localhost:5432/app.yaml</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">postgrest</span><span class="kw">:</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">app_path</span><span class="kw">:</span><span class="at"> postgrest</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">conf_path</span><span class="kw">:</span><span class="at"> postgrest.conf</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">port</span><span class="kw">:</span><span class="at"> </span><span class="dv">3000</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">enviroment</span><span class="kw">:</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> PGUSER</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> PGPASSWORD</span></span></code></pre></div>
<p>When I accepted using Postgres the config action knows that the
connection string can be built from the standard environment variables
expected by Postgres’ psql and database connectors. That is why even
through I answered “N” to the question about setting up environment
variables to import I still have environment variables listed.</p>
<p>NOTE: if “app.yaml” already existed then answer “Y” or “N” questions
would have only updated “app.yaml” after I answered “Y” to the question,
“Save and exit (Y/n)?”. Before that any changes would have been in the
computer’s memory but not acted upon by writing them to disk.</p>
<p>NOTE: When you are running <code>newt config</code> you can press
“control C” to quit the “config” action without writing the YAML to
disk.</p>
<p>Next up <a href="newt_model_explained.html">Newt Model</a></p>
</section>

<footer>
<span><h1><A href="http://caltech.edu">Caltech</a></h1></span>
<span>&copy; 2023-2024 <a href="https://www.library.caltech.edu/copyright">Caltech library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
<span><a href="mailto:library@caltech.edu">Email Us</a></span>
<a class="cl-hide" href="sitemap.xml">Site Map</a>
</footer>
</body>
</html>
